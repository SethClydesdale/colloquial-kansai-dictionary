!function(e,t){"use strict";if("file:"==e.location.protocol)for(var a=t.getElementsByTagName("A"),n=0,i=a.length;n<i;n++)/http/.test(a[n].href)||(/\/$/.test(a[n].href)?a[n].href+="index.html":/\/#.*?$/.test(a[n].href)?a[n].href=a[n].href.replace(/(#.*?)$/,"index.html$1"):/\/\?.*?$/.test(a[n].href)&&(a[n].href=a[n].href.replace(/(\?.*?)$/,"index.html$1")));var r=t.getElementById("content").querySelectorAll("h1, h2, h3, h4, h5, h6");for(n=0,i=r.length;n<i;n++)r[n].id&&r[n].insertAdjacentHTML("afterbegin",'<a href="#'+r[n].id+'" class="anchor fa"><span class="anchor-icon">&#xf0c1;</span></a>');if(storageOK){var l=t.querySelector("footer"),c=t.createElement("LABEL"),o=t.createElement("DIV"),s=t.createElement("A");c.id="light-switch",c.tabIndex=0,c.innerHTML='<input id="light-switch-checkbox" type="checkbox" '+("on"==localStorage.darkMode?'checked="true"':"")+"/><div></div>",c.onkeyup=function(e){"Enter"==e.key&&this.firstChild.click()},c.firstChild.onchange=function(){var a,n=t.documentElement;if(this.checked?(localStorage.darkMode="on",(a=t.createElement("LINK")).id="dark-mode",a.rel="stylesheet",a.href=getPaths()+"resources/css/stylesheet-dark.min.css",t.head.appendChild(a),n.className+=" dark-mode"):(localStorage.darkMode="off",(a=t.getElementById("dark-mode"))&&t.head.removeChild(a),n.className=n.className.replace(" dark-mode","")),e.KanjiCanvas){KanjiCanvas.darkMode=!!t.querySelector(".dark-mode"),KanjiCanvas.quizOver=!!t.querySelector(".quiz-over");for(var i=t.querySelectorAll(".kanji-canvas"),r=0,l=i.length;r<l;r++)KanjiCanvas["canvas_"+i[r].id]&&KanjiCanvas.redraw(i[r].id,!0,!!e.Genki&&Genki.strokeNumberDisplay)}},o.id="light-switch-container",o.innerHTML='<label id="light-switch-label" for="light-switch-checkbox">Dark Mode </label>',s.id="genki-site-settings",s.innerHTML='<i class="fa">&#xf013;</i>',s.title="Site Settings",s.href="#",s.onclick=function(){return!t.getElementById("genki-modal")&&(GenkiSettings.manager(),!1)},o.appendChild(c),o.appendChild(s),l.appendChild(o)}else{l=t.querySelector("footer");(o=t.createElement("DIV")).id="light-switch-container",o.innerHTML='<a href="'+getPaths()+"help/stuck-loading/"+("file:"==e.location.protocol?"index.html":"")+'"><strong>Where is Dark Mode?</strong></a>',l.appendChild(o)}t.addEventListener("keydown",function(e){if(e.ctrlKey&&e.altKey||e.metaKey&&e.shiftKey){var a;switch(e.key.toLowerCase()){case"n":a=t.getElementById("toggle-navigation");break;case"q":a=t.getElementById("quick-jisho-toggle");break;case"d":a=t.getElementById("light-switch");break;case"f":a=t.querySelector(".furigana-toggler");break;case"m":a=t.getElementById("genki-site-settings")}a&&(e.preventDefault(),a.click())}})}(window,document);
!function(i,e){"use strict";var s={canNotify:"Notification"in i,isTouch:"ontouchstart"in i||navigator.maxTouchPoints>0||navigator.msMaxTouchPoints>0,isTouching:!1,local:"file:"==i.location.protocol?"index.html":"",debug:/debug/.test(i.location.search)?"?debug":"",lang:{toggle_furigana:'<button class="button furigana-toggler" onclick="Genki.toggle.furigana(this);"><i class="fa">&#xf2a8;</i>Furigana: <span class="furigana-show">OFF</span><span class="furigana-hide">ON</span></button>'},active:{path:i.location.pathname.replace(/.*?\/lessons.*?\/(.*?\/.*?)\/.*/g,"$1")},scrollTo:function(i,s){"string"==typeof i&&(i=e.querySelector(i));var t=function(){e.body.scrollTop=i.offsetTop,e.documentElement.scrollTop=i.offsetTop};s?setTimeout(t,100):t()},toggle:{quickNav:function(i){i.className="list-open"==i.className?"":"list-open"},list:function(i){var e="lesson-title",s=e+" lesson-open";i.className=i.className==s?e:s;for(var t=i.parentNode.querySelectorAll(".lesson-title"),o=0,a=t.length;o<a;o++)t[o]!=i&&(t[o].className=e)},furigana:function(i){var t=e.getElementById("page"),o=storageOK&&localStorage.furiganaVisible||(/helper-hidden/.test(t.className)?"false":"true");switch(o){case"true":o="false",t.className=t.className.replace("helper-present","helper-hidden");break;case"false":o="true",t.className=t.className.replace("helper-hidden","helper-present")}s.lang.toggle_furigana=i.outerHTML,storageOK&&(localStorage.furiganaVisible=o)}},create:{quickNav:function(){var i='<a href="#toggle-navigation" id="toggle-navigation" onclick="Genki.toggle.quickNav(this); return false;" title="Toggle quick navigation"></a><nav id="quick-nav"><h3 class="main-title">Quick Navigation</h3><div id="lessons-list"><div id="link-list" class="normal-block indent-block"><div><a id="link-home" href="'+(""==getPaths()?"#main-title":getPaths())+'"><i class="fa">'+(""==getPaths()?"&#xf062;":"&#xf015;")+"</i>"+(""==getPaths()?"Top":"Home")+'</a></div><div><a id="link-report" href="'+getPaths()+'report/"><i class="fa">&#xf188;</i>Reports &amp; Feedback</a></div><div><a id="link-download" href="'+getPaths()+'download/"><i class="fa">&#xf019;</i>Download</a></div><div><a id="link-donate" href="'+getPaths()+'donate/"><i class="fa">&#xf004;</i>Donate</a></div><div><a id="link-github" href="https://github.com/SethClydesdale/colloquial-kansai-dictionary"><i class="fa">&#xf09b;</i>GitHub</a></div><div><a id="link-settings" href="#genki-site-settings" onclick="GenkiSettings.manager(); return false;"><i class="fa">&#xf013;</i>Settings</a></div><div>'+s.lang.toggle_furigana+'</div></div><div id="related-projects" class="indent-block"><h3>Related Projects</h3><a href="https://sethclydesdale.github.io/genki-study-resources/lessons-3rd/" title="Genki Study Resources"><img src="'+getPaths()+'resources/images/genki-img.png" alt="Genki Study Resources"></a><a href="https://sethclydesdale.github.io/tobira-study-resources/" title="Tobira Study Resources"><img src="'+getPaths()+'resources/images/tobira-img.png" alt="Tobira Study Resources"></a></div></div></nav>';e.getElementById("content").insertAdjacentHTML("afterbegin",i)}},quickJisho:{hidden:!0,selectorHidden:!0,tabbing:!1,create:function(){if(!s.quickJisho.cache){var i=e.createElement("DIV"),t=e.createElement("DIV"),o=e.createElement("BUTTON"),a=e.createDocumentFragment();i.id="quick-jisho-toggle",i.innerHTML='<i class="fa">&#xf02d;</i>',i.title="Toggle Quick Dictionary",i.tabIndex=0,i.onclick=s.quickJisho.toggle,i.onkeypress=function(i){"Enter"==i.key&&s.quickJisho.toggle()},t.id="quick-jisho-window",t.className="quick-jisho-hidden",t.innerHTML='<div class="quick-jisho-header"><h3 id="quick-jisho-title" class="main-title"> Quick Dictionary <span id="quick-jisho-hits"></span> </h3> <i class="fa fa-hover" tabindex="0" onclick="Genki.quickJisho.toggle();" onkeydown="event.key == \'Enter\' && Genki.quickJisho.toggle();" title="Minimize">&#xf2d1;</i>  </div><div id="quick-jisho-content"><div class="quick-jisho-row center"><input tabindex="0" id="quick-jisho-search" type="text" placeholder="Search..." oninput="Genki.quickJisho.search(this.value);"></div><div class="quick-jisho-row"><ul id="quick-jisho-results"></ul></div></div>',o.id="quick-jisho-selector",o.className="button",o.style.display="none",o.innerHTML='<i class="fa">&#xf002;</i>Look up',o.onclick=s.quickJisho.lookUp,o.tabIndex=0,a.appendChild(t),a.appendChild(i),a.appendChild(o),e.body.appendChild(a);e.querySelector(".footer-right").style.marginRight="40px",s.quickJisho.cache={box:t,search:e.getElementById("quick-jisho-search"),results:e.getElementById("quick-jisho-results"),hits:e.getElementById("quick-jisho-hits"),selector:e.getElementById("quick-jisho-selector")},e.onselectionchange=s.quickJisho.getSelection,e.onmousemove=function(i){s.quickJisho.x=Math.abs(i.pageX-e.body.clientWidth)<100?i.pageX-95:i.pageX,s.quickJisho.y=Math.abs(i.pageY-e.body.clientHeight)<40?i.pageY-32:i.pageY+12},e.onkeydown=function(i){"Tab"!=i.key||s.quickJisho.selectorHidden||e.activeElement==s.quickJisho.cache.selector||(s.quickJisho.tabbing=!0,s.quickJisho.cache.selector.focus(),i.preventDefault())}}},toggle:function(){if(!s.jisho&&!s.quickJisho.loading){s.quickJisho.loading=!0;var i=e.createElement("SCRIPT");i.src=getPaths()+"resources/javascript/jisho.min.js",i.onload=function(){s.quickJisho.cache.search.value&&s.quickJisho.search(s.quickJisho.cache.search.value),s.quickJisho.loading=!1},e.body.appendChild(i)}s.quickJisho.hidden?(s.quickJisho.cache.box.className="",s.quickJisho.hidden=!1,s.quickJisho.cache.search.focus()):(s.quickJisho.cache.box.className="quick-jisho-hidden",s.quickJisho.hidden=!0)},search:function(e,t){s.quickJisho.searchTimeout&&i.clearTimeout(s.quickJisho.searchTimeout),s.quickJisho.searchTimeout=i.setTimeout(function(){var i,o,a,c,n,l="",h=0;if(s.quickJisho.cache.results.innerHTML="",e){e=e.toLowerCase();for(i in s.jisho)for(o=0,a=s.jisho[i].length;o<a;o++)for(c in s.jisho[i][o])if(-1!=s.jisho[i][o][c].toLowerCase().indexOf(e)){l+='<li tabindex="0" class="definition clear"><span class="def-ja'+((n=s.jisho[i][o].ja.split("|"))[1]?" def-furi":"")+'">'+n[0]+(n[1]?"<i>"+n[1]+"</i>":"")+'</span><span class="def-en">'+s.jisho[i][o].en+"</span>"+(s.jisho[i][o].v?' <span class="def-vtype">[<i>'+s.jisho[i][o].v+"</i>]</span>":"")+'<span class="def-label">'+s.jisho[i][o].l+"</span>",h++;break}}if(!t&&!l&&e&&/[\u3400-\u9faf]/.test(e)){var u=e.match(/[\u3400-\u9faf]+/);u&&u[0]&&s.quickJisho.search(u[0],!0)}else s.quickJisho.cache.results.innerHTML=l||(e?'<li>No results found for "'+e+'".</li>':""),s.quickJisho.cache.hits.innerHTML=h?"("+h+")":"";delete s.quickJisho.searchTimeout},300)},lookUp:function(){s.quickJisho.hidden&&s.quickJisho.toggle(),s.quickJisho.cache.search.value="".trim?s.quickJisho.selectedText.trim():s.quickJisho.selectedText,s.quickJisho.search(s.quickJisho.cache.search.value),this.style.display="none",s.quickJisho.selectorHidden=!0},getSelection:function(){if(storageOK&&"false"==localStorage.genkiJishoLookUp)return!1;if(s.quickJisho.tabbing)return s.quickJisho.tabbingOff||(s.quickJisho.tabbingOff=setTimeout(function(){s.quickJisho.tabbing=!1,delete s.quickJisho.tabbingOff},10)),!1;if(e.getSelection){var i=e.getSelection();"Range"==i.type&&i.toString&&!/quick-jisho/.test(i.focusNode.className)?(s.quickJisho.selectedText=i.toString(),s.quickJisho.cache.selector.style.left=s.quickJisho.x+"px",s.quickJisho.cache.selector.style.top=s.quickJisho.y+"px",s.quickJisho.selectorHidden&&(s.quickJisho.cache.selector.style.display="",s.quickJisho.selectorHidden=!1)):(s.quickJisho.selectedText="",s.quickJisho.selectorHidden||(s.quickJisho.cache.selector.style.display="none",s.quickJisho.selectorHidden=!0))}}},init:function(){s.create.quickNav(),s.isTouch&&(e.ontouchstart=function(){s.isTouching=!0},e.ontouchend=function(){s.isTouching=!1},e.ontouchcancel=function(){s.isTouching=!1}),i.Genki=this}};s.init()}(window,document);
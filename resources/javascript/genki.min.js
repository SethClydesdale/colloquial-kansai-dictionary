!function(e,i){"use strict";var s={canNotify:"Notification"in e,isTouch:"ontouchstart"in e||navigator.maxTouchPoints>0||navigator.msMaxTouchPoints>0,isTouching:!1,local:"file:"==e.location.protocol?"index.html":"",debug:/debug/.test(e.location.search)?"?debug":"",lang:{toggle_furigana:'<button class="button furigana-toggler" onclick="Genki.toggle.furigana(this);"><i class="fa">&#xf2a8;</i>Furigana: <span class="furigana-show">OFF</span><span class="furigana-hide">ON</span></button>'},active:{path:e.location.pathname.replace(/.*?\/lessons.*?\/(.*?\/.*?)\/.*/g,"$1")},scrollTo:function(e,s){"string"==typeof e&&(e=i.querySelector(e));var t=function(){i.body.scrollTop=e.offsetTop,i.documentElement.scrollTop=e.offsetTop};s?setTimeout(t,100):t()},toggle:{quickNav:function(e){e.className="list-open"==e.className?"":"list-open"},list:function(e){var i="lesson-title",s=i+" lesson-open";e.className=e.className==s?i:s;for(var t=e.parentNode.querySelectorAll(".lesson-title"),a=0,o=t.length;a<o;a++)t[a]!=e&&(t[a].className=i)},furigana:function(e){var t=i.getElementById("page"),a=storageOK&&localStorage.furiganaVisible||(/helper-hidden/.test(t.className)?"false":"true");switch(a){case"true":a="false",t.className=t.className.replace("helper-present","helper-hidden");break;case"false":a="true",t.className=t.className.replace("helper-hidden","helper-present")}s.lang.toggle_furigana=e.outerHTML,storageOK&&(localStorage.furiganaVisible=a)}},create:{quickNav:function(){var e='<a href="#toggle-navigation" id="toggle-navigation" onclick="Genki.toggle.quickNav(this); return false;" title="Toggle quick navigation"></a><nav id="quick-nav"><h3 class="main-title">Quick Navigation</h3><div id="lessons-list"><div id="link-list" class="normal-block indent-block"><div><a id="link-home" href="'+(""==getPaths()?"#main-title":getPaths())+'"><i class="fa">'+(""==getPaths()?"&#xf062;":"&#xf015;")+"</i>"+(""==getPaths()?"Top":"Home")+'</a></div><div><a id="link-report" href="'+getPaths()+'report/"><i class="fa">&#xf188;</i>Reports &amp; Feedback</a></div><div><a id="link-download" href="'+getPaths()+'download/"><i class="fa">&#xf019;</i>Download</a></div><div><a id="link-donate" href="'+getPaths()+'donate/"><i class="fa">&#xf004;</i>Donate</a></div><div><a id="link-github" href="https://github.com/SethClydesdale/colloquial-kansai-dictionary"><i class="fa">&#xf09b;</i>GitHub</a></div><div><a id="link-settings" href="#genki-site-settings" onclick="GenkiSettings.manager(); return false;"><i class="fa">&#xf013;</i>Settings</a></div><div>'+s.lang.toggle_furigana+'</div></div><div id="related-projects" class="indent-block"><h3>Related Projects</h3><a href="https://sethclydesdale.github.io/genki-study-resources/" title="Genki Study Resources"><img src="'+getPaths()+'resources/images/genki-img.png" alt="Genki Study Resources"></a><a href="https://sethclydesdale.github.io/tobira-study-resources/" title="Tobira Study Resources"><img src="'+getPaths()+'resources/images/tobira-img.png" alt="Tobira Study Resources"></a><a href="https://sethclydesdale.github.io/quartet-study-resources/" title="Quartet Study Resources"><img src="'+getPaths()+'resources/images/quartet-img.png" alt="Quartet Study Resources"></a></div></div></nav>';i.getElementById("content").insertAdjacentHTML("afterbegin",e)}},quickJisho:{hidden:!0,selectorHidden:!0,tabbing:!1,create:function(){if(!s.quickJisho.cache){var e=i.createElement("DIV"),t=i.createElement("DIV"),a=i.createElement("BUTTON"),o=i.createDocumentFragment();e.id="quick-jisho-toggle",e.innerHTML='<i class="fa">&#xf02d;</i>',e.title="Toggle Quick Dictionary",e.tabIndex=0,e.onclick=s.quickJisho.toggle,e.onkeypress=function(e){"Enter"==e.key&&s.quickJisho.toggle()},t.id="quick-jisho-window",t.className="quick-jisho-hidden",t.innerHTML='<div class="quick-jisho-header"><h3 id="quick-jisho-title" class="main-title"> Quick Dictionary <span id="quick-jisho-hits"></span> </h3> <i class="fa fa-hover" tabindex="0" onclick="Genki.quickJisho.toggle();" onkeydown="event.key == \'Enter\' && Genki.quickJisho.toggle();" title="Minimize">&#xf2d1;</i>  </div><div id="quick-jisho-content"><div class="quick-jisho-row center"><input tabindex="0" id="quick-jisho-search" type="text" placeholder="Search..." oninput="Genki.quickJisho.search(this.value);"></div><div class="quick-jisho-row"><ul id="quick-jisho-results"></ul></div></div>',a.id="quick-jisho-selector",a.className="button",a.style.display="none",a.innerHTML='<i class="fa">&#xf002;</i>Look up',a.onclick=s.quickJisho.lookUp,a.tabIndex=0,o.appendChild(t),o.appendChild(e),o.appendChild(a),i.body.appendChild(o);i.querySelector(".footer-right").style.marginRight="40px",s.quickJisho.cache={box:t,search:i.getElementById("quick-jisho-search"),results:i.getElementById("quick-jisho-results"),hits:i.getElementById("quick-jisho-hits"),selector:i.getElementById("quick-jisho-selector")},i.onselectionchange=s.quickJisho.getSelection,i.onmousemove=function(e){s.quickJisho.x=Math.abs(e.pageX-i.body.clientWidth)<100?e.pageX-95:e.pageX,s.quickJisho.y=Math.abs(e.pageY-i.body.clientHeight)<40?e.pageY-32:e.pageY+12},i.onkeydown=function(e){"Tab"!=e.key||s.quickJisho.selectorHidden||i.activeElement==s.quickJisho.cache.selector||(s.quickJisho.tabbing=!0,s.quickJisho.cache.selector.focus(),e.preventDefault())}}},toggle:function(){if(!s.jisho&&!s.quickJisho.loading){s.quickJisho.loading=!0;var e=i.createElement("SCRIPT");e.src=getPaths()+"resources/javascript/jisho.min.js",e.onload=function(){s.quickJisho.cache.search.value&&s.quickJisho.search(s.quickJisho.cache.search.value),s.quickJisho.loading=!1},i.body.appendChild(e)}s.quickJisho.hidden?(s.quickJisho.cache.box.className="",s.quickJisho.hidden=!1,s.quickJisho.cache.search.focus()):(s.quickJisho.cache.box.className="quick-jisho-hidden",s.quickJisho.hidden=!0)},search:function(i,t){s.quickJisho.searchTimeout&&e.clearTimeout(s.quickJisho.searchTimeout),s.quickJisho.searchTimeout=e.setTimeout(function(){var e,a,o,c,n,l="",h=0;if(s.quickJisho.cache.results.innerHTML="",i){i=i.toLowerCase();for(e in s.jisho)for(a=0,o=s.jisho[e].length;a<o;a++)for(c in s.jisho[e][a])if(-1!=s.jisho[e][a][c].toLowerCase().indexOf(i)){l+='<li tabindex="0" class="definition clear"><span class="def-ja'+((n=s.jisho[e][a].ja.split("|"))[1]?" def-furi":"")+'">'+n[0]+(n[1]?"<i>"+n[1]+"</i>":"")+'</span><span class="def-en">'+s.jisho[e][a].en+"</span>"+(s.jisho[e][a].v?' <span class="def-vtype">[<i>'+s.jisho[e][a].v+"</i>]</span>":"")+'<span class="def-label">'+s.jisho[e][a].l+"</span>",h++;break}}if(!t&&!l&&i&&/[\u3400-\u9faf]/.test(i)){var u=i.match(/[\u3400-\u9faf]+/);u&&u[0]&&s.quickJisho.search(u[0],!0)}else s.quickJisho.cache.results.innerHTML=l||(i?'<li>No results found for "'+i+'".</li>':""),s.quickJisho.cache.hits.innerHTML=h?"("+h+")":"";delete s.quickJisho.searchTimeout},300)},lookUp:function(){s.quickJisho.hidden&&s.quickJisho.toggle(),s.quickJisho.cache.search.value="".trim?s.quickJisho.selectedText.trim():s.quickJisho.selectedText,s.quickJisho.search(s.quickJisho.cache.search.value),this.style.display="none",s.quickJisho.selectorHidden=!0},getSelection:function(){if(storageOK&&"false"==localStorage.genkiJishoLookUp)return!1;if(s.quickJisho.tabbing)return s.quickJisho.tabbingOff||(s.quickJisho.tabbingOff=setTimeout(function(){s.quickJisho.tabbing=!1,delete s.quickJisho.tabbingOff},10)),!1;if(i.getSelection){var e=i.getSelection();"Range"==e.type&&e.toString&&!/quick-jisho/.test(e.focusNode.className)?(s.quickJisho.selectedText=e.toString(),s.quickJisho.cache.selector.style.left=s.quickJisho.x+"px",s.quickJisho.cache.selector.style.top=s.quickJisho.y+"px",s.quickJisho.selectorHidden&&(s.quickJisho.cache.selector.style.display="",s.quickJisho.selectorHidden=!1)):(s.quickJisho.selectedText="",s.quickJisho.selectorHidden||(s.quickJisho.cache.selector.style.display="none",s.quickJisho.selectorHidden=!0))}}},init:function(){s.create.quickNav(),s.isTouch&&(i.ontouchstart=function(){s.isTouching=!0},i.ontouchend=function(){s.isTouching=!1},i.ontouchcancel=function(){s.isTouching=!1}),e.Genki=this}};s.init()}(window,document);